{"content": "# [Paella](#)\n\n### Preseed builder\n\nThe preseed is currently a mako template.  \n\nThe preseed file has certain responsibilities beyond automating the first \nstage of the installation.\n\n1. The early command must download and execute a  script that:\n\n\t1. Determines the partman recipe for the machine and installs it \n\tto the installer filesystem (/tmp/disk-recipe).\n\t\n\t2. Overrides the archive.gpg in the installer environment with the \n\tkey from the local repository.  (This is still problematic and the \n\tfirst stage install is still unauthenticated.)\n\t\n2. The preseed file must install salt-minion.\n\n3. The late command must download and execute a script that:\n\n\t1. Configures salt-minion with the identity of the machine.\n\t\n\t2. Send a post request to the server informing it that stage one is almost\n\tcomplete.  This will cause the server to delete the pxe config files \n\t(or alternatively, reconfigure the files to default to hard drive booting).\n\n\t3. Preseeds the salt-minion with the installer keys. (This isn't implemented\n\tyet.  The master is running in open mode.)  The request made above should \n\tsignal the server to locate the minion keys for the machine, and if no \n\tkeys are found, to generate them.  The paella server should keep track of \n\tall the keys and only set the master to accept those that it preseeds.\n\t\n\n", "id": "preseed"}